/* Author：mingyuhisoft@163.com
 * Github:https://github.com/imingyu/jquery.mloading
 * Npm:npm install jquery.mloading.js
 * Date：2016-7-4
 */
(function(a,b){if(typeof module==="object"&&typeof module.exports==="object"){b(require("jquery"),a)}if(typeof define==="function"){if(define.cmd){define(function(d,c,e){var f=d("jquery");b(f,a)})}else{define(["jquery"],function(c){b(c,a)})}}else{b(a.jQuery,a)}}(typeof window!=="undefined"?window:this,function(d,b,f){if(!d){d=b.jQuery||null}if(!d){throw new TypeError("必须引入jquery库方可正常使用！")}var e=Array.prototype.slice,c=function(j,h){var g=true;for(var i in j){if(j[i]!==h[j]){g=true;break}}return g};function a(h,g){g=g||{};this.dom=h;this.options=d.extend(true,{},a.defaultOptions,g);this.curtain=null;this.render().show()}a.prototype={constructor:a,initElement:function(){var n=this.dom,l=this.options;var h=n.children(".mloading"),m=h.children(".mloading-body"),j=m.children(".mloading-bar"),k=j.children(".mloading-icon"),i=j.find(".mloading-text");if(h.length==0){h=d('<div class="mloading"></div>');n.append(h)}if(m.length==0){m=d('<div class="mloading-body"></div>');h.append(m)}if(j.length==0){j=d('<div class="mloading-bar"></div>');m.append(j)}if(k.length==0){var g=document.createElement(l.iconTag);k=d(g);k.addClass("mloading-icon");j.append(k)}if(i.length==0){i=d('<span class="mloading-text"></span>');j.append(i)}this.curtainElement=h;this.bodyElement=m;this.barElement=j;this.iconElement=k;this.textElement=i;return this},render:function(){var h=this.dom,g=this.options;this.initElement();if(h.is("html")||h.is("body")){this.curtainElement.addClass("mloading-full")}else{this.curtainElement.removeClass("mloading-full");if(!h.hasClass("mloading-container")){h.addClass("mloading-container")}}if(g.mask){this.curtainElement.addClass("mloading-mask")}else{this.curtainElement.removeClass("mloading-mask")}if(g.content!=""&&typeof g.content!="undefined"){if(g.html){this.bodyElement.html(g.content)}else{this.bodyElement.text(g.content)}}else{this.iconElement.attr("src",g.icon);if(g.html){this.textElement.html(g.text)}else{this.textElement.text(g.text)}}return this},setOptions:function(h){h=h||{};var g=this.options;this.options=d.extend(true,{},this.options,h);if(!c(g,this.options)){this.render()}},show:function(){var i=this.dom,h=this.options,g=this.barElement;this.curtainElement.addClass("active");g.css({marginTop:"-"+g.outerHeight()/2+"px",marginLeft:"-"+g.outerWidth()/2+"px"});return this},hide:function(){var h=this.dom,g=this.options;this.curtainElement.removeClass("active");if(!h.is("html")&&!h.is("body")){h.removeClass("mloading-container")}return this},destroy:function(){var h=this.dom,g=this.options;this.curtainElement.remove();if(!h.is("html")&&!h.is("body")){h.removeClass("mloading-container")}h.removeData(a.dataKey);return this}};a.dataKey="MLoading";a.defaultOptions={text:"加载中...",iconTag:"img",icon:"data:image/gif;base64,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",html:false,content:"",mask:true};d.fn.mLoading=function(g){var h={},j="",i=[];if(typeof g==="object"){h=g}else{if(typeof g==="string"){j=g;i=e.call(arguments).splice(0,1)}}return this.each(function(m,l){var n=d(l),o=n.data(a.dataKey);if(!o){o=new a(n,h)}if(j){var k=o[j];if(typeof k==="function"){k.apply(o,i)}}})}}));